<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farsi Learning App - Offline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: ltr;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            transition: width 0.3s ease;
        }

        .content {
            padding: 30px;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #f0f4ff;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .lesson-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .lesson-card.completed {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .lesson-card.current {
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .lesson-number {
            font-size: 1.5em;
            font-weight: bold;
        }

        .lesson-status {
            font-size: 0.8em;
            margin-top: 5px;
            opacity: 0.9;
        }

        .textbook-view {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            max-height: 500px;
            overflow-y: auto;
            line-height: 1.8;
        }

        .farsi-text {
            direction: rtl;
            font-size: 1.4em;
            line-height: 2;
            font-family: 'Tahoma', 'Arial', sans-serif;
        }

        .vocab-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .vocab-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .vocab-table td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .vocab-table tr:hover {
            background: #f8f9fa;
        }

        .section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .section-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .practice-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            background: #667eea;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #38ef7d;
        }

        .btn-success:hover {
            background: #2dd36f;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .flashcard {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            border: 2px solid #e9ecef;
            margin: 20px 0;
        }

        .flashcard:hover {
            transform: scale(1.02);
        }

        .flashcard.flipped {
            background: #f8f9fa;
        }

        .flashcard-front {
            font-size: 2em;
        }

        .flashcard-back {
            display: none;
        }

        .flashcard.flipped .flashcard-front {
            display: none;
        }

        .flashcard.flipped .flashcard-back {
            display: block;
        }

        .quiz-option {
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .quiz-option.correct {
            border-color: #38ef7d;
            background: #d4f4dd;
        }

        .quiz-option.incorrect {
            border-color: #ff6b6b;
            background: #ffe0e0;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1em;
            margin: 10px 0;
        }

        textarea {
            min-height: 100px;
            font-family: inherit;
        }

        .answer-feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .answer-feedback.correct {
            background: #d4f4dd;
            border: 2px solid #38ef7d;
        }

        .answer-feedback.incorrect {
            background: #ffe0e0;
            border: 2px solid #ff6b6b;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š Farsi Learning App</h1>
            <p>Colloquial Persian - Offline Edition</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText" style="margin-top: 10px; font-size: 0.9em;">0 of 15 lessons completed</p>
        </div>

        <div class="content">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('lessons')">ğŸ“– Lessons</button>
                <button class="tab-btn" onclick="showTab('read')">ğŸ“„ Read</button>
                <button class="tab-btn" onclick="showTab('practice')">âœï¸ Practice</button>
                <button class="tab-btn" onclick="showTab('flashcards')">ğŸ´ Flashcards</button>
                <button class="tab-btn" onclick="showTab('quiz')">â“ Quiz</button>
            </div>

            <!-- Lessons Tab -->
            <div id="lessons" class="tab-content active">
                <div class="section-title">Select a Lesson</div>
                <div class="info-box">
                    âœ… Works completely offline! Tap any lesson to start. Green = completed, Gold border = current lesson.
                </div>
                <div class="lesson-grid" id="lessonGrid"></div>
            </div>

            <!-- Read Tab -->
            <div id="read" class="tab-content">
                <div class="section-title">Lesson <span id="readLessonNum">1</span>: <span id="lessonTitle"></span></div>
                <div class="textbook-view" id="textbookContent">
                    <p>Select a lesson to view its content</p>
                </div>
                <button class="btn btn-success" onclick="markLessonComplete()" style="margin-top: 20px;">âœ“ Mark Complete</button>
            </div>

            <!-- Practice Tab -->
            <div id="practice" class="tab-content">
                <div class="section-title">Practice Lesson <span id="practiceLessonNum">1</span></div>
                <div id="practiceArea">
                    <p>Select a lesson to start practicing</p>
                </div>
            </div>

            <!-- Flashcards Tab -->
            <div id="flashcards" class="tab-content">
                <div class="section-title">Flashcards - Lesson <span id="flashcardsLessonNum">1</span></div>
                <div id="flashcardsArea">
                    <p>Select a lesson to practice with flashcards</p>
                </div>
            </div>

            <!-- Quiz Tab -->
            <div id="quiz" class="tab-content">
                <div class="section-title">Quiz - Lesson <span id="quizLessonNum">1</span></div>
                <div id="quizArea">
                    <p>Select a lesson to take a quiz</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global error handler to catch issues
        window.addEventListener('error', function(e) {
            console.error('Global error caught:', e.message, 'at', e.filename, 'line', e.lineno);
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
        });

        // Embedded textbook data
        const UNITS = {
            1: { name: "Unit 1: Foundations", lessons: [1, 2, 3], description: "Basic greetings, directions, and family" },
            2: { name: "Unit 2: Daily Life", lessons: [4, 5, 6], description: "Routines, food, and shopping" },
            3: { name: "Unit 3: Past & Present", lessons: [7, 8, 9], description: "Past tense, weather, and health" },
            4: { name: "Unit 4: Movement", lessons: [10, 11, 12], description: "Travel, future plans, and culture" },
            5: { name: "Unit 5: Mastery", lessons: [13, 14, 15], description: "Work, hobbies, and conversation" }
        };
        
        const TEXTBOOK_DATA = {
            "1": {
                "title": "First Contact",
                "vocabulary": [
                    {"farsi": "Ø³Ù„Ø§Ù…", "trans": "salaam", "english": "hello, hi"},
                    {"farsi": "ØµØ¨Ø­ Ø¨Ø®ÛŒØ±", "trans": "sobh bekheyr", "english": "good morning"},
                    {"farsi": "Ù…Ù…Ù†ÙˆÙ†", "trans": "mamnun", "english": "thank you"},
                    {"farsi": "Ø®ÙˆØ§Ù‡Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "trans": "khaahesh mikonam", "english": "you're welcome"},
                    {"farsi": "Ø¨Ù„Ù‡", "trans": "baleh", "english": "yes"},
                    {"farsi": "Ù†Ù‡", "trans": "na", "english": "no"},
                    {"farsi": "Ù„Ø·ÙØ§Ù‹", "trans": "lotfan", "english": "please"},
                    {"farsi": "Ø®ÙˆØ¨", "trans": "khub", "english": "good, well"},
                    {"farsi": "Ø¨Ø¯", "trans": "bad", "english": "bad"},
                    {"farsi": "Ú†Ø·ÙˆØ±", "trans": "chetor", "english": "how"}
                ],
                "phrases": [
                    {"farsi": "Ø­Ø§Ù„ Ø´Ù…Ø§ Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ", "trans": "haal-e shomaa chetor ast?", "english": "How are you? (formal)"},
                    {"farsi": "Ø®ÙˆØ¨Ù…ØŒ Ù…Ù…Ù†ÙˆÙ†", "trans": "khubam, mamnun", "english": "I'm fine, thank you"},
                    {"farsi": "Ø§Ø³Ù… Ø´Ù…Ø§ Ú†ÛŒØ³ØªØŸ", "trans": "esm-e shomaa chist?", "english": "What is your name?"},
                    {"farsi": "Ø®ÙˆØ´ÙˆÙ‚ØªÙ…", "trans": "khoshvaghtam", "english": "Pleased to meet you"}
                ],
                "grammar": "Introduction to Persian script and alphabet. Basic greetings. Formal vs informal address: Ø´Ù…Ø§ (shomaa - you formal) vs ØªÙˆ (to - you informal). The verb 'to be' in present tense (Ø§Ø³Øª - ast, Ù‡Ø³Øª - hast).",
                "dialogue": "Ali and Sara meet for the first time:\nØ¹Ù„ÛŒ: Ø³Ù„Ø§Ù…! Ø§Ø³Ù… Ù…Ù† Ø¹Ù„ÛŒ Ø§Ø³Øª.\nØ³Ø§Ø±Ø§: Ø³Ù„Ø§Ù…! Ø§Ø³Ù… Ù…Ù† Ø³Ø§Ø±Ø§ Ø§Ø³Øª. Ø®ÙˆØ´ÙˆÙ‚ØªÙ….\nØ¹Ù„ÛŒ: Ø­Ø§Ù„ Ø´Ù…Ø§ Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ\nØ³Ø§Ø±Ø§: Ø®ÙˆØ¨Ù…ØŒ Ù…Ù…Ù†ÙˆÙ†. Ø´Ù…Ø§ Ú†Ø·ÙˆØ±ÛŒØ¯ØŸ\nØ¹Ù„ÛŒ: Ù…Ù† Ù‡Ù… Ø®ÙˆØ¨Ù…ØŒ Ù…ØªØ´Ú©Ø±Ù….",
                "exercises": [
                    "Write the Persian alphabet 5 times each",
                    "Practice the formal greeting: Ø­Ø§Ù„ Ø´Ù…Ø§ Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ",
                    "Introduce yourself in Farsi using the patterns learned",
                    "Match Persian greetings with their English meanings"
                ],
                "dialogueTranslit": "Ali and Sara meet for the first time:\nAli: Salaam! Esm-e man Ali ast.\nSaara: Salaam! Esm-e man Saara ast. Khoshvaghtam.\nAli: Haal-e shomaa chetor ast?\nSaara: Khubam, mamnun. Shomaa chetorid?\nAli: Man ham khubam, moteshakkeram."
            },
            "2": {
                "title": "Getting Around",
                "vocabulary": [
                    {"farsi": "Ú©Ø¬Ø§", "trans": "kojaa", "english": "where"},
                    {"farsi": "Ø§ÛŒÙ†Ø¬Ø§", "trans": "injaa", "english": "here"},
                    {"farsi": "Ø¢Ù†Ø¬Ø§", "trans": "aanjaa", "english": "there"},
                    {"farsi": "Ø±Ø§Ø³Øª", "trans": "raast", "english": "right"},
                    {"farsi": "Ú†Ù¾", "trans": "chap", "english": "left"},
                    {"farsi": "Ù…Ø³ØªÙ‚ÛŒÙ…", "trans": "mostaqim", "english": "straight"},
                    {"farsi": "Ø®ÛŒØ§Ø¨Ø§Ù†", "trans": "khiyaabaan", "english": "street"},
                    {"farsi": "Ù…ÛŒØ¯Ø§Ù†", "trans": "meydaan", "english": "square"},
                    {"farsi": "Ù†Ø²Ø¯ÛŒÚ©", "trans": "nazdik", "english": "near"},
                    {"farsi": "Ø¯ÙˆØ±", "trans": "door", "english": "far"}
                ],
                "phrases": [
                    {"farsi": "Ú©Ø¬Ø§ Ù…ÛŒâ€ŒØ±ÙˆÛŒØ¯ØŸ", "trans": "kojaa miravid?", "english": "Where are you going?"},
                    {"farsi": "Ø§Ø² Ú©Ø¬Ø§ Ø¢Ù…Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ", "trans": "az kojaa aamade-id?", "english": "Where have you come from?"},
                    {"farsi": "Ø¨Ø¨Ø®Ø´ÛŒØ¯ØŒ Ø§ÛŒÙ† Ú©Ø¬Ø§Ø³ØªØŸ", "trans": "bebakhshid, in kojaa-st?", "english": "Excuse me, where is this?"},
                    {"farsi": "Ø®ÛŒÙ„ÛŒ Ø¯ÙˆØ± Ø§Ø³ØªØŸ", "trans": "kheyli door ast?", "english": "Is it very far?"}
                ],
                "grammar": "Present tense verb conjugation: Ù…ÛŒâ€ŒØ±ÙˆÙ… (miram - I go), Ù…ÛŒâ€ŒØ±ÙˆÛŒ (miri - you go), Ù…ÛŒâ€ŒØ±ÙˆØ¯ (miravad - he/she goes). Question words: Ú©Ø¬Ø§ (where), Ú†Ù‡ (what), Ú©ÛŒ (who). Prepositions: Ø§Ø² (from), Ø¨Ù‡ (to), Ø¯Ø± (in).",
                "dialogue": "Asking for directions:\nØªÙˆØ±ÛŒØ³Øª: Ø¨Ø¨Ø®Ø´ÛŒØ¯ØŒ Ù…ÛŒØ¯Ø§Ù† Ø¢Ø²Ø§Ø¯ÛŒ Ú©Ø¬Ø§Ø³ØªØŸ\nÙ…Ø±Ø¯: Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ø¨Ø¹Ø¯ Ø¨Ù‡ Ø±Ø§Ø³Øª Ø¨Ù¾ÛŒÚ†ÛŒØ¯.\nØªÙˆØ±ÛŒØ³Øª: Ø®ÛŒÙ„ÛŒ Ø¯ÙˆØ± Ø§Ø³Øª?\nÙ…Ø±Ø¯: Ù†Ù‡ØŒ Ù†Ø²Ø¯ÛŒÚ© Ø§Ø³Øª. Ù¾Ù†Ø¬ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾ÛŒØ§Ø¯Ù‡.",
                "exercises": [
                    "Conjugate the verb 'to go' (Ø±ÙØªÙ†) in present tense",
                    "Form 5 questions using Ú©Ø¬Ø§ (where)",
                    "Practice giving directions using Ø±Ø§Ø³ØªØŒ Ú†Ù¾ØŒ Ù…Ø³ØªÙ‚ÛŒÙ…",
                    "Translate: Where is the square? Is it near or far?"
                ],
                "dialogueTranslit": "Asking for directions:\nToorist: Bebakhshid, meydaan-e aazaadi kojaa-st?\nMard: Mostaghim beravid va ba'd be raast bepichid.\nToorist: Kheyli door ast?\nMard: Na, nazdik ast. Panj daghighe piaade."
            },
            "3": {
                "title": "Family and Friends",
                "vocabulary": [
                    {"farsi": "Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡", "trans": "khanevadeh", "english": "family"},
                    {"farsi": "Ù¾Ø¯Ø±", "trans": "pedar", "english": "father"},
                    {"farsi": "Ù…Ø§Ø¯Ø±", "trans": "maadar", "english": "mother"},
                    {"farsi": "Ø¨Ø±Ø§Ø¯Ø±", "trans": "baraadar", "english": "brother"},
                    {"farsi": "Ø®ÙˆØ§Ù‡Ø±", "trans": "khahar", "english": "sister"},
                    {"farsi": "Ù¾Ø³Ø±", "trans": "pesar", "english": "son"},
                    {"farsi": "Ø¯Ø®ØªØ±", "trans": "dokhtar", "english": "daughter"},
                    {"farsi": "Ø¯ÙˆØ³Øª", "trans": "dust", "english": "friend"},
                    {"farsi": "Ù‡Ù…Ø³Ø±", "trans": "hamsar", "english": "spouse"},
                    {"farsi": "Ø¨Ú†Ù‡", "trans": "bachche", "english": "child"}
                ],
                "phrases": [
                    {"farsi": "Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø´Ù…Ø§ Ú†Ù†Ø¯ Ù†ÙØ± Ù‡Ø³ØªÙ†Ø¯ØŸ", "trans": "khaanevaade-ye shomaa chand nafar hastand?", "english": "How many people are in your family?"},
                    {"farsi": "Ø¨Ø±Ø§Ø¯Ø± Ø¯Ø§Ø±ÛŒØ¯ØŸ", "trans": "baraadar daarid?", "english": "Do you have a brother?"},
                    {"farsi": "Ù¾Ø¯Ø± Ù…Ù† Ù…Ø¹Ù„Ù… Ø§Ø³Øª", "trans": "pedar-e man mo'alem ast", "english": "My father is a teacher"}
                ],
                "grammar": "Possessive construction using ezafe: Ù¾Ø¯Ø± Ù…Ù† (my father), Ø®Ø§Ù†Ù‡â€ŒÛŒ Ø§Ùˆ (his/her house). Numbers 1-10. Plural forms: adding Ù‡Ø§ or Ø§Ù†. Verb 'to have' (Ø¯Ø§Ø´ØªÙ† - daashtan).",
                "dialogue": "Talking about family:\nØ³Ø§Ø±Ø§: Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø´Ù…Ø§ Ú†Ù†Ø¯ Ù†ÙØ± Ù‡Ø³ØªÙ†Ø¯?\nØ±Ø¶Ø§: Ú†Ù‡Ø§Ø± Ù†ÙØ±. Ù¾Ø¯Ø±ØŒ Ù…Ø§Ø¯Ø±ØŒ ÛŒÚ© Ø¨Ø±Ø§Ø¯Ø± Ùˆ Ù…Ù†.\nØ³Ø§Ø±Ø§: Ø¨Ø±Ø§Ø¯Ø± Ø´Ù…Ø§ Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯?\nØ±Ø¶Ø§: Ø§Ùˆ Ø¯Ø§Ù†Ø´Ø¬Ùˆ Ø§Ø³Øª.",
                "dialogueTranslit": "Talking about family:\nSaara: Khaanevaade-ye shomaa chand nafar hastand?\nRezaa: Chahaar nafar. Pedar, maadar, yek baraadar va man.\nSaara: Baraadar-e shomaa che kaar mikonad?\nRezaa: Oo daneshju ast.",
                "exercises": [
                    "Learn numbers 1-10 in Farsi",
                    "Describe your family using possessive forms",
                    "Practice ezafe construction with 10 examples",
                    "Translate: I have two sisters and one brother"
                ]
            },
            "4": {
                "title": "Daily Activities",
                "vocabulary": [
                    {"farsi": "Ú©Ø§Ø±", "trans": "kaar", "english": "work"},
                    {"farsi": "Ø®ÙˆØ§Ø¨ÛŒØ¯Ù†", "trans": "khaabidan", "english": "to sleep"},
                    {"farsi": "Ø®ÙˆØ±Ø¯Ù†", "trans": "khordan", "english": "to eat"},
                    {"farsi": "Ù†ÙˆØ´ÛŒØ¯Ù†", "trans": "nooshidan", "english": "to drink"},
                    {"farsi": "Ø±ÙØªÙ†", "trans": "raftan", "english": "to go"},
                    {"farsi": "Ø¢Ù…Ø¯Ù†", "trans": "aamadan", "english": "to come"},
                    {"farsi": "ØµØ¨Ø­Ø§Ù†Ù‡", "trans": "sobhane", "english": "breakfast"},
                    {"farsi": "Ù†Ø§Ù‡Ø§Ø±", "trans": "nahar", "english": "lunch"},
                    {"farsi": "Ø´Ø§Ù…", "trans": "sham", "english": "dinner"},
                    {"farsi": "Ø³Ø§Ø¹Øª", "trans": "saa'at", "english": "hour, clock"}
                ],
                "phrases": [
                    {"farsi": "Ù‡Ø± Ø±ÙˆØ² Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ", "trans": "har rooz che kaar mikonid?", "english": "What do you do every day?"},
                    {"farsi": "Ø³Ø§Ø¹Øª Ú†Ù†Ø¯ Ø¨ÛŒØ¯Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯ØŸ", "trans": "saa'at chand bidaar mishavid?", "english": "What time do you wake up?"},
                    {"farsi": "Ù…Ù† Ø³Ø§Ø¹Øª Ù‡ÙØª ØµØ¨Ø­Ø§Ù†Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù…", "trans": "man saa'at haft sobhaane mikhoram", "english": "I eat breakfast at 7 o'clock"}
                ],
                "grammar": "Present continuous tense: Ù…ÛŒâ€ŒØ®ÙˆØ±Ù… (I am eating), Ù…ÛŒâ€ŒØ±ÙˆÙ… (I am going). Time expressions: Ù‡Ø± Ø±ÙˆØ² (every day), Ø§Ù…Ø±ÙˆØ² (today), ÙØ±Ø¯Ø§ (tomorrow). Telling time using Ø³Ø§Ø¹Øª.",
                "dialogue": "Daily routine:\nÙ…Ø±ÛŒÙ…: Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª Ú†Ù†Ø¯ Ø¨ÛŒØ¯Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯?\nØ¹Ù„ÛŒ: Ø³Ø§Ø¹Øª Ø´Ø´ ØµØ¨Ø­. Ø´Ù…Ø§ Ú†Ø·ÙˆØ±?\nÙ…Ø±ÛŒÙ…: Ù…Ù† Ø³Ø§Ø¹Øª Ù‡ÙØª. Ø¨Ø¹Ø¯ ØµØ¨Ø­Ø§Ù†Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù… Ùˆ Ø¨Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ù…ÛŒâ€ŒØ±ÙˆÙ….",
                "exercises": [
                    "Write about your daily routine in Farsi",
                    "Conjugate 5 common verbs in present tense",
                    "Practice telling time: What time is it?",
                    "Create sentences using time expressions"
                ],
                "dialogueTranslit": "Daily routine:\nMaryam: Har rooz saa'at chand bidaar mishavid?\nAli: Saa'at shesh sobh. Shomaa chetor?\nMaryam: Man saa'at haft. Ba'd sobhaneh mikhoram va be daneshgah miram."
            },
            "5": {
                "title": "Food and Restaurants",
                "vocabulary": [
                    {"farsi": "ØºØ°Ø§", "trans": "ghaza", "english": "food"},
                    {"farsi": "Ù†Ø§Ù†", "trans": "nan", "english": "bread"},
                    {"farsi": "Ø¢Ø¨", "trans": "ab", "english": "water"},
                    {"farsi": "Ú†Ø§ÛŒ", "trans": "chay", "english": "tea"},
                    {"farsi": "Ù‚Ù‡ÙˆÙ‡", "trans": "ghahve", "english": "coffee"},
                    {"farsi": "Ø±Ø³ØªÙˆØ±Ø§Ù†", "trans": "restoraan", "english": "restaurant"},
                    {"farsi": "Ù…Ù†Ùˆ", "trans": "menoo", "english": "menu"},
                    {"farsi": "Ø¨Ø±Ù†Ø¬", "trans": "berenj", "english": "rice"},
                    {"farsi": "Ú¯ÙˆØ´Øª", "trans": "goosht", "english": "meat"},
                    {"farsi": "Ø³Ø¨Ø²ÛŒ", "trans": "sabzi", "english": "vegetables"}
                ],
                "phrases": [
                    {"farsi": "Ú†Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ±ÛŒØ¯ØŸ", "trans": "che mikhorid?", "english": "What will you eat/have?"},
                    {"farsi": "ÛŒÚ© Ú†Ø§ÛŒ Ù„Ø·ÙØ§Ù‹", "trans": "yek chay lotfan", "english": "One tea, please"},
                    {"farsi": "Ø­Ø³Ø§Ø¨ Ù„Ø·ÙØ§Ù‹", "trans": "hesaab lotfan", "english": "The bill, please"},
                    {"farsi": "Ø®ÙˆØ´Ù…Ø²Ù‡ Ø§Ø³Øª", "trans": "khoshmaze ast", "english": "It's delicious"}
                ],
                "grammar": "Food vocabulary and cultural notes about Persian cuisine. Polite requests using Ù„Ø·ÙØ§Ù‹. Expressing preferences: Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… (I like), ØªØ±Ø¬ÛŒØ­ Ù…ÛŒâ€ŒØ¯Ù‡Ù… (I prefer).",
                "dialogue": "At a restaurant:\nÚ¯Ø§Ø±Ø³ÙˆÙ†: Ú†Ù‡ Ù…ÛŒÙ„ Ø¯Ø§Ø±ÛŒØ¯?\nÙ…Ø´ØªØ±ÛŒ: Ù…Ù†Ùˆ Ø±Ø§ Ù„Ø·ÙØ§Ù‹.\nÚ¯Ø§Ø±Ø³ÙˆÙ†: Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯.\nÙ…Ø´ØªØ±ÛŒ: ÛŒÚ© Ú†Ù„Ùˆ Ú©Ø¨Ø§Ø¨ Ùˆ ÛŒÚ© Ú†Ø§ÛŒ Ù„Ø·ÙØ§Ù‹.",
                "dialogueTranslit": "At a restaurant:\nGaarsun: Che mil daarid?\nMoshtari: Menoo raa lotfan.\nGaarsun: Befarmaa'id.\nMoshtari: Yek chelo kabaab va yek chay lotfan.",
                "exercises": [
                    "Learn 20 food items in Farsi",
                    "Role-play ordering at a restaurant",
                    "Write sentences about your favorite foods",
                    "Practice: I like... I don't like..."
                ]
            },
            "6": {
                "title": "Shopping and Money",
                "vocabulary": [
                    {"farsi": "Ø®Ø±ÛŒØ¯", "trans": "kharid", "english": "shopping"},
                    {"farsi": "ÙØ±ÙˆØ´Ú¯Ø§Ù‡", "trans": "forushgah", "english": "shop, store"},
                    {"farsi": "Ø¨Ø§Ø²Ø§Ø±", "trans": "bazar", "english": "bazaar, market"},
                    {"farsi": "Ù¾ÙˆÙ„", "trans": "pul", "english": "money"},
                    {"farsi": "Ù‚ÛŒÙ…Øª", "trans": "gheymat", "english": "price"},
                    {"farsi": "Ú¯Ø±Ø§Ù†", "trans": "geraan", "english": "expensive"},
                    {"farsi": "Ø§Ø±Ø²Ø§Ù†", "trans": "arzaan", "english": "cheap"},
                    {"farsi": "Ú†Ù‚Ø¯Ø±", "trans": "cheghadr", "english": "how much"},
                    {"farsi": "ØªÙˆÙ…Ø§Ù†", "trans": "tomaan", "english": "toman (currency)"},
                    {"farsi": "Ø®Ø±ÛŒØ¯Ù†", "trans": "kharidan", "english": "to buy"}
                ],
                "phrases": [
                    {"farsi": "Ø§ÛŒÙ† Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ", "trans": "in cheghadr ast?", "english": "How much is this?"},
                    {"farsi": "Ø®ÛŒÙ„ÛŒ Ú¯Ø±Ø§Ù† Ø§Ø³Øª", "trans": "kheyli geraan ast", "english": "It's very expensive"},
                    {"farsi": "ØªØ®ÙÛŒÙ Ø¯Ø§Ø±Ø¯ØŸ", "trans": "takhfif daarad?", "english": "Is there a discount?"},
                    {"farsi": "Ù…ÛŒâ€ŒØ®Ø±Ù…", "trans": "mikharam", "english": "I'll buy it"}
                ],
                "grammar": "Numbers 11-100. Currency and prices. Comparative adjectives: Ú¯Ø±Ø§Ù†â€ŒØªØ± (more expensive), Ø§Ø±Ø²Ø§Ù†â€ŒØªØ± (cheaper). Shopping expressions and bargaining phrases.",
                "dialogue": "At the bazaar:\nØ®Ø±ÛŒØ¯Ø§Ø±: Ø³Ù„Ø§Ù…ØŒ Ø§ÛŒÙ† Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ\nÙØ±ÙˆØ´Ù†Ø¯Ù‡: ØµØ¯ Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù†.\nØ®Ø±ÛŒØ¯Ø§Ø±: Ø®ÛŒÙ„ÛŒ Ú¯Ø±Ø§Ù† Ø§Ø³Øª! Ù‡Ø´ØªØ§Ø¯ Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù† Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ\nÙØ±ÙˆØ´Ù†Ø¯Ù‡: Ù†ÙˆØ¯ Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù†ØŒ Ø¢Ø®Ø±ÛŒÙ† Ù‚ÛŒÙ…Øª.\nØ®Ø±ÛŒØ¯Ø§Ø±: Ø¨Ø§Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØ®Ø±Ù….",
                "exercises": [
                    "Learn numbers 11-100 in Farsi",
                    "Practice asking prices: Ø§ÛŒÙ† Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ",
                    "Role-play a shopping conversation",
                    "Write about things you want to buy"
                ],
                "dialogueTranslit": "At the bazaar:\nKharidaar: Salaam, in cheghadr ast?\nForooshandeh: Sad hezaar tomaan.\nKharidaar: Kheyli geraan ast! Hashtaad hezaar tomaan chetor ast?\nForooshandeh: Navad hezaar tomaan, aakharin gheymat.\nKharidaar: Baasheh, mikharam."
            },
            "7": {
                "title": "Past Tense and Memories",
                "vocabulary": [
                    {"farsi": "Ø¯ÛŒØ±ÙˆØ²", "trans": "irooz", "english": "yesterday"},
                    {"farsi": "Ù¾Ø±ÛŒØ±ÙˆØ²", "trans": "parirooz", "english": "day before yesterday"},
                    {"farsi": "Ù‡ÙØªÙ‡ Ú¯Ø°Ø´ØªÙ‡", "trans": "hafte-ye gozashte", "english": "last week"},
                    {"farsi": "Ø³Ø§Ù„ Ù¾ÛŒØ´", "trans": "saal-e pish", "english": "last year"},
                    {"farsi": "Ø±ÙØªÙ…", "trans": "raftam", "english": "I went"},
                    {"farsi": "Ø¯ÛŒØ¯Ù…", "trans": "didam", "english": "I saw"},
                    {"farsi": "Ú¯ÙØªÙ…", "trans": "goftam", "english": "I said"},
                    {"farsi": "Ø´Ù†ÛŒØ¯Ù…", "trans": "shenidam", "english": "I heard"},
                    {"farsi": "Ø®ÙˆØ§Ù†Ø¯Ù…", "trans": "khaandam", "english": "I read"},
                    {"farsi": "Ù†ÙˆØ´ØªÙ…", "trans": "neveshtam", "english": "I wrote"}
                ],
                "phrases": [
                    {"farsi": "Ø¯ÛŒØ±ÙˆØ² Ø¨Ù‡ Ø³ÛŒÙ†Ù…Ø§ Ø±ÙØªÙ…", "trans": "dirooz be sinemaa raftam", "english": "Yesterday I went to the cinema"},
                    {"farsi": "ÛŒÚ© ÙÛŒÙ„Ù… Ø¯ÛŒØ¯Ù…", "trans": "yek film didam", "english": "I saw a movie"},
                    {"farsi": "Ú†Ù‡ Ú©Ø±Ø¯ÛŒØ¯ØŸ", "trans": "che kardid?", "english": "What did you do?"},
                    {"farsi": "Ú©Ø¬Ø§ Ø¨ÙˆØ¯ÛŒØ¯ØŸ", "trans": "kojaa budid?", "english": "Where were you?"}
                ],
                "grammar": "Past tense formation: verb stem + past tense endings (Ù…- Ø§Ù…ØŒ ÛŒ- Ø§ÛŒØŒ ØµÙØ±ØŒ ÛŒÙ…- Ø§ÛŒÙ…ØŒ ÛŒØ¯- Ø§ÛŒØ¯ØŒ Ù†Ø¯- Ø§Ù†Ø¯). Regular and irregular verbs in past tense. Time expressions for past events.",
                "dialogue": "Talking about the weekend:\nØ¹Ù„ÛŒ: Ø¢Ø®Ø± Ù‡ÙØªÙ‡ Ú†Ù‡ Ú©Ø±Ø¯ÛŒØŸ\nØ³Ø§Ø±Ø§: Ø¨Ù‡ Ø´Ù…Ø§Ù„ Ø±ÙØªÙ…. Ø¨Ø§ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø¨Ù‡ Ø³Ø§Ø­Ù„ Ø±ÙØªÛŒÙ….\nØ¹Ù„ÛŒ: Ú†Ù‡ Ø®ÙˆØ¨! Ù‡ÙˆØ§ Ú†Ø·ÙˆØ± Ø¨ÙˆØ¯ØŸ\nØ³Ø§Ø±Ø§: Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯. Ø¢ÙØªØ§Ø¨ÛŒ Ùˆ Ú¯Ø±Ù…. ØªÙˆ Ú†Ù‡ Ú©Ø±Ø¯ÛŒØŸ\nØ¹Ù„ÛŒ: Ù…Ù† Ø®Ø§Ù†Ù‡ Ø¨ÙˆØ¯Ù…. Ú©ØªØ§Ø¨ Ø®ÙˆØ§Ù†Ø¯Ù… Ùˆ Ø§Ø³ØªØ±Ø§Ø­Øª Ú©Ø±Ø¯Ù….",
                "exercises": [
                    "Conjugate 10 common verbs in past tense",
                    "Write about what you did yesterday",
                    "Transform present tense sentences to past tense",
                    "Answer: Ú©Ø¬Ø§ Ø¨ÙˆØ¯ÛŒØ¯ØŸ Ú†Ù‡ Ú©Ø±Ø¯ÛŒØ¯ØŸ"
                ],
                "dialogueTranslit": "Talking about the weekend:\nAli: Aakhar-e hafte che kardi?\nSaara: Be shomaal raftam. Baa khanevadeh be saahel raftim.\nAli: Che khub! Havaa chetor bud?\nSaara: Ali bud. Aaftaabi va garm. To che kardi?\nAli: Man khaneh budam. Ketaab khaandam va esteraahat kardam."
            },
            "8": {
                "title": "Weather and Seasons",
                "vocabulary": [
                    {"farsi": "Ù‡ÙˆØ§", "trans": "havaa", "english": "weather, air"},
                    {"farsi": "Ø¢ÙØªØ§Ø¨ÛŒ", "trans": "aaftaabi", "english": "sunny"},
                    {"farsi": "Ø§Ø¨Ø±ÛŒ", "trans": "abri", "english": "cloudy"},
                    {"farsi": "Ø¨Ø§Ø±Ø§Ù†ÛŒ", "trans": "baaraani", "english": "rainy"},
                    {"farsi": "Ø¨Ø±ÙÛŒ", "trans": "barfi", "english": "snowy"},
                    {"farsi": "Ú¯Ø±Ù…", "trans": "garm", "english": "hot, warm"},
                    {"farsi": "Ø³Ø±Ø¯", "trans": "sard", "english": "cold"},
                    {"farsi": "Ø¨Ù‡Ø§Ø±", "trans": "bahaar", "english": "spring"},
                    {"farsi": "ØªØ§Ø¨Ø³ØªØ§Ù†", "trans": "taabestaan", "english": "summer"},
                    {"farsi": "Ù¾Ø§ÛŒÛŒØ²", "trans": "paa'iz", "english": "autumn"},
                    {"farsi": "Ø²Ù…Ø³ØªØ§Ù†", "trans": "zemestaan", "english": "winter"}
                ],
                "phrases": [
                    {"farsi": "Ù‡ÙˆØ§ Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ", "trans": "havaa chetor ast?", "english": "How is the weather?"},
                    {"farsi": "Ø§Ù…Ø±ÙˆØ² Ù‡ÙˆØ§ Ø³Ø±Ø¯ Ø§Ø³Øª", "trans": "emrooz havaa sard ast", "english": "Today the weather is cold"},
                    {"farsi": "Ø¨Ø§Ø±Ø§Ù† Ù…ÛŒâ€ŒØ¨Ø§Ø±Ø¯", "trans": "baaraan mibaarad", "english": "It's raining"},
                    {"farsi": "Ø¨Ø±Ù Ù…ÛŒâ€ŒØ¨Ø§Ø±Ø¯", "trans": "barf mibaarad", "english": "It's snowing"}
                ],
                "grammar": "Weather expressions and impersonal constructions. Describing seasons and climate. Temperature and weather conditions. Present progressive for weather: Ù…ÛŒâ€ŒØ¨Ø§Ø±Ø¯ (is falling/raining).",
                "dialogue": "Discussing the weather:\nÙ…Ø±ÛŒÙ…: Ù‡ÙˆØ§ Ø§Ù…Ø±ÙˆØ² Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ\nØ±Ø¶Ø§: Ø®ÛŒÙ„ÛŒ Ø³Ø±Ø¯ Ø§Ø³Øª Ùˆ Ø§Ø¨Ø±ÛŒ Ø§Ø³Øª.\nÙ…Ø±ÛŒÙ…: ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒ Ø¨Ø±Ù Ù…ÛŒâ€ŒØ¨Ø§Ø±Ø¯ØŸ\nØ±Ø¶Ø§: Ø¨Ù„Ù‡ØŒ Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø§Ù…Ø´Ø¨ Ø¨Ø±Ù Ù…ÛŒâ€ŒØ¨Ø§Ø±Ø¯.\nÙ…Ø±ÛŒÙ…: Ù…Ù† Ø¨Ù‡Ø§Ø± Ø±Ø§ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù…. Ù‡ÙˆØ§ Ù…Ù„Ø§ÛŒÙ… Ø§Ø³Øª.\nØ±Ø¶Ø§: Ù…Ù† Ù‡Ù…. Ø¨Ù‡Ø§Ø± Ø¨Ù‡ØªØ±ÛŒÙ† ÙØµÙ„ Ø³Ø§Ù„ Ø§Ø³Øª.",
                "exercises": [
                    "Describe the weather in all four seasons",
                    "Learn weather vocabulary and practice describing today's weather",
                    "Compare different seasons using comparative forms",
                    "Write: Which season do you like? Why?"
                ],
                "dialogueTranslit": "Discussing the weather:\nMaryam: Havaa emrooz chetor ast?\nRezaa: Kheyli sard ast va abri ast.\nMaryam: Fekr mikoni barf mibaraad?\nRezaa: Baleh, ehtemaalanaman emshab barf mibaraad.\nMaryam: Man bahaar raa doost daaram. Havaa molaa'yem ast.\nRezaa: Man ham. Bahaar behtarin fasl-e saal ast."
            },
            "9": {
                "title": "Health and Body",
                "vocabulary": [
                    {"farsi": "Ø³Ù„Ø§Ù…ØªÛŒ", "trans": "salaamati", "english": "health"},
                    {"farsi": "Ù…Ø±ÛŒØ¶", "trans": "mariz", "english": "sick, ill"},
                    {"farsi": "Ø¯Ø±Ø¯", "trans": "dard", "english": "pain, ache"},
                    {"farsi": "Ø³Ø±", "trans": "sar", "english": "head"},
                    {"farsi": "Ø¯Ù„", "trans": "del", "english": "stomach"},
                    {"farsi": "Ú¯Ù„Ùˆ", "trans": "galu", "english": "throat"},
                    {"farsi": "Ø¯Ø³Øª", "trans": "dast", "english": "hand, arm"},
                    {"farsi": "Ù¾Ø§", "trans": "paa", "english": "foot, leg"},
                    {"farsi": "Ú†Ø´Ù…", "trans": "cheshm", "english": "eye"},
                    {"farsi": "Ø¯Ú©ØªØ±", "trans": "doktor", "english": "doctor"},
                    {"farsi": "Ø¯Ø§Ø±ÙˆØ®Ø§Ù†Ù‡", "trans": "daarukhaane", "english": "pharmacy"},
                    {"farsi": "Ø¯Ø§Ø±Ùˆ", "trans": "daaru", "english": "medicine"}
                ],
                "phrases": [
                    {"farsi": "Ø­Ø§Ù„Øª Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ", "trans": "haalat chetor ast?", "english": "How do you feel?"},
                    {"farsi": "Ø³Ø±Ù… Ø¯Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯", "trans": "saram dard mikonad", "english": "My head hurts / I have a headache"},
                    {"farsi": "Ù…Ø±ÛŒØ¶ Ù‡Ø³ØªÙ…", "trans": "mariz hastam", "english": "I am sick"},
                    {"farsi": "Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø¯Ú©ØªØ± Ø¨Ø±ÙˆÙ…", "trans": "baayad be doktor beravam", "english": "I should go to the doctor"}
                ],
                "grammar": "Body parts vocabulary. Expressing pain and illness: Ø¯Ø±Ø¯ Ú©Ø±Ø¯Ù† (to hurt). Modal verb Ø¨Ø§ÛŒØ¯ (must, should). Health-related expressions and visiting the doctor.",
                "dialogue": "At the doctor:\nØ¯Ú©ØªØ±: Ø­Ø§Ù„ØªØ§Ù† Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ\nØ¨ÛŒÙ…Ø§Ø±: Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ù†ÛŒØ³ØªÙ…. Ø³Ø±Ù… Ø¯Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ ØªØ¨ Ø¯Ø§Ø±Ù….\nØ¯Ú©ØªØ±: Ø§Ø² Ú©ÛŒ Ø§ÛŒÙ†â€ŒØ·ÙˆØ± Ù‡Ø³ØªÛŒØ¯ØŸ\nØ¨ÛŒÙ…Ø§Ø±: Ø§Ø² Ø¯Ùˆ Ø±ÙˆØ² Ù¾ÛŒØ´.\nØ¯Ú©ØªØ±: Ø¨Ø§Ø´Ø¯. Ø³Ø±Ù…Ø§Ø®ÙˆØ±Ø¯Ú¯ÛŒ Ø§Ø³Øª. Ø§ÛŒÙ† Ø¯Ø§Ø±Ùˆ Ø±Ø§ Ø¨Ø®ÙˆØ±ÛŒØ¯.\nØ¨ÛŒÙ…Ø§Ø±: Ú†Ù†Ø¯ Ø¨Ø§Ø± Ø¯Ø± Ø±ÙˆØ²ØŸ\nØ¯Ú©ØªØ±: Ø³Ù‡ Ø¨Ø§Ø±ØŒ Ø¨Ø¹Ø¯ Ø§Ø² ØºØ°Ø§.",
                "exercises": [
                    "Learn names of body parts in Farsi",
                    "Practice saying: [body part] Ø¯Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯",
                    "Write a dialogue at the doctor's office",
                    "Describe symptoms of common illnesses"
                ],
                "dialogueTranslit": "At the doctor:\nDoktor: Haal-etaan chetor ast?\nBimaar: Kheyli khub nistam. Saram dard mikonad va tab daaram.\nDoktor: Az kay intor hastid?\nBimaar: Az do rooz pish.\nDoktor: Baasheh. Sarmaa-khordegi ast. In daaroo raa bekhorid.\nBimaar: Chand baar dar rooz?\nDoktor: Se baar, ba'd az ghazaa."
            },
            "10": {
                "title": "Travel and Transportation",
                "vocabulary": [
                    {"farsi": "Ø³ÙØ±", "trans": "safar", "english": "travel, trip"},
                    {"farsi": "Ù…Ø³Ø§ÙØ±Øª", "trans": "mosaaferat", "english": "journey"},
                    {"farsi": "Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§", "trans": "havaapeymaa", "english": "airplane"},
                    {"farsi": "Ù‚Ø·Ø§Ø±", "trans": "ghataar", "english": "train"},
                    {"farsi": "Ø§ØªÙˆØ¨ÙˆØ³", "trans": "otobus", "english": "bus"},
                    {"farsi": "ØªØ§Ú©Ø³ÛŒ", "trans": "taaksi", "english": "taxi"},
                    {"farsi": "Ù…ØªØ±Ùˆ", "trans": "metro", "english": "metro, subway"},
                    {"farsi": "Ø§ÛŒØ³ØªÚ¯Ø§Ù‡", "trans": "istgaah", "english": "station"},
                    {"farsi": "ÙØ±ÙˆØ¯Ú¯Ø§Ù‡", "trans": "forudgaah", "english": "airport"},
                    {"farsi": "Ø¨Ù„ÛŒØ·", "trans": "belit", "english": "ticket"},
                    {"farsi": "Ú†Ù…Ø¯Ø§Ù†", "trans": "chamedaan", "english": "suitcase"}
                ],
                "phrases": [
                    {"farsi": "Ú©Ø¬Ø§ Ù…ÛŒâ€ŒØ±ÙˆÛŒØ¯ØŸ", "trans": "kojaa miravid?", "english": "Where are you going?"},
                    {"farsi": "Ø¨Ù‡ Ø§ØµÙÙ‡Ø§Ù† Ù…ÛŒâ€ŒØ±ÙˆÙ…", "trans": "be esfahaan miravam", "english": "I'm going to Isfahan"},
                    {"farsi": "Ø¨Ø§ Ú†Ù‡ ÙˆØ³ÛŒÙ„Ù‡â€ŒØ§ÛŒØŸ", "trans": "baa che vasile-i?", "english": "By what means? / How?"},
                    {"farsi": "ÛŒÚ© Ø¨Ù„ÛŒØ· Ø¨Ù‡ ØªÙ‡Ø±Ø§Ù†", "trans": "yek belit be tehraan", "english": "One ticket to Tehran"}
                ],
                "grammar": "Transportation vocabulary. Asking about and describing travel plans. Prepositions of movement: Ø¨Ù‡ (to), Ø§Ø² (from). Future constructions with Ù…ÛŒâ€ŒØ±ÙˆÙ… (I'm going / I will go).",
                "dialogue": "At the station:\nÙ…Ø³Ø§ÙØ±: Ø¨Ø¨Ø®Ø´ÛŒØ¯ØŒ Ù‚Ø·Ø§Ø± Ø¨Ø¹Ø¯ÛŒ Ø¨Ù‡ Ø´ÛŒØ±Ø§Ø² Ú©ÛŒ Ø­Ø±Ú©Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ\nÙ…Ø£Ù…ÙˆØ±: Ø³Ø§Ø¹Øª Ø³Ù‡ Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø±.\nÙ…Ø³Ø§ÙØ±: ÛŒÚ© Ø¨Ù„ÛŒØ· Ù„Ø·ÙØ§Ù‹.\nÙ…Ø£Ù…ÙˆØ±: ÛŒÚ© Ø·Ø±ÙÙ‡ ÛŒØ§ Ø±ÙØª Ùˆ Ø¨Ø±Ú¯Ø´ØªØŸ\nÙ…Ø³Ø§ÙØ±: Ø±ÙØª Ùˆ Ø¨Ø±Ú¯Ø´Øª.\nÙ…Ø£Ù…ÙˆØ±: Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯. Ø³ÛŒ Ùˆ Ù¾Ù†Ø¬ Ø§ÛŒØ³ØªÚ¯Ø§Ù‡ Ø§Ø³Øª.",
                "exercises": [
                    "Learn transportation vocabulary",
                    "Practice buying tickets and asking about schedules",
                    "Describe your last trip or journey",
                    "Write: Where would you like to travel? How would you get there?"
                ],
                "dialogueTranslit": "At the station:\nMosaafer: Bebakhshid, ghataar-e ba'di be Shiraaz key harekat mikonad?\nMa'moor: Saa'at se ba'd az zohr.\nMosaafer: Yek belit lotfan.\nMa'moor: Yek tarafe yaa raft va bargasht?\nMosaafer: Raft va bargasht.\nMa'moor: Befarmaa'id. Si va panj istgaah ast."
            },
            "11": {
                "title": "Future Plans and Intentions",
                "vocabulary": [
                    {"farsi": "ÙØ±Ø¯Ø§", "trans": "fardaa", "english": "tomorrow"},
                    {"farsi": "Ù¾Ø³â€ŒÙØ±Ø¯Ø§", "trans": "pasfardaa", "english": "day after tomorrow"},
                    {"farsi": "Ù‡ÙØªÙ‡ Ø¢ÛŒÙ†Ø¯Ù‡", "trans": "hafte-ye aayande", "english": "next week"},
                    {"farsi": "Ù…Ø§Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡", "trans": "maah-e aayande", "english": "next month"},
                    {"farsi": "Ø³Ø§Ù„ Ø¢ÛŒÙ†Ø¯Ù‡", "trans": "saal-e aayande", "english": "next year"},
                    {"farsi": "Ø¨Ø±Ù†Ø§Ù…Ù‡", "trans": "barnaame", "english": "plan, program"},
                    {"farsi": "Ù‚ØµØ¯", "trans": "ghasd", "english": "intention"},
                    {"farsi": "Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù…", "trans": "mikhaham", "english": "I want"},
                    {"farsi": "Ø®ÙˆØ§Ù‡Ù… Ø±ÙØª", "trans": "khaham raft", "english": "I will go"},
                    {"farsi": "Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ù…", "trans": "omidvaaram", "english": "I hope"}
                ],
                "phrases": [
                    {"farsi": "ÙØ±Ø¯Ø§ Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ", "trans": "fardaa che kaar mikonid?", "english": "What will you do tomorrow?"},
                    {"farsi": "Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ø¨Ù‡ Ù¾Ø§Ø±Ú© Ø¨Ø±ÙˆÙ…", "trans": "mikhaham be paark beravam", "english": "I want to go to the park"},
                    {"farsi": "Ù‚ØµØ¯ Ø¯Ø§Ø±Ù… Ø³ÙØ± Ú©Ù†Ù…", "trans": "ghasd daaram safar konam", "english": "I intend to travel"},
                    {"farsi": "Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ù… Ù‡ÙˆØ§ Ø®ÙˆØ¨ Ø¨Ø§Ø´Ø¯", "trans": "omidvaaram havaa khub baashad", "english": "I hope the weather will be good"}
                ],
                "grammar": "Future tense formation: Ø®ÙˆØ§Ù‡Ù… + verb stem (formal future). Expressing intentions: Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… + subjunctive, Ù‚ØµØ¯ Ø¯Ø§Ø±Ù… + subjunctive. Making plans and predictions. Time expressions for future.",
                "dialogue": "Making weekend plans:\nØ³Ø§Ø±Ø§: Ø¢Ø®Ø± Ù‡ÙØªÙ‡ Ú†Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±ÛŒØŸ\nØ±Ø¶Ø§: Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ø¨Ù‡ Ú©ÙˆÙ‡ Ø¨Ø±ÙˆÙ…. ØªÙˆ Ú†Ø·ÙˆØ±ØŸ\nØ³Ø§Ø±Ø§: Ù‡Ù†ÙˆØ² Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…. Ø´Ø§ÛŒØ¯ Ø®Ø§Ù†Ù‡ Ø¨Ù…Ø§Ù†Ù….\nØ±Ø¶Ø§: Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ Ø¨Ø§ Ù…Ø§ Ø¨ÛŒØ§ÛŒÛŒØŸ\nØ³Ø§Ø±Ø§: Ú†Ù‡ ÙˆÙ‚Øª Ù…ÛŒâ€ŒØ±ÙˆÛŒØ¯ØŸ\nØ±Ø¶Ø§: ØµØ¨Ø­ Ø²ÙˆØ¯ØŒ Ø³Ø§Ø¹Øª Ø´Ø´.\nØ³Ø§Ø±Ø§: Ø¨Ø§Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØ¢ÛŒÙ…. Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ù… Ù‡ÙˆØ§ Ø®ÙˆØ¨ Ø¨Ø§Ø´Ø¯!",
                "exercises": [
                    "Form future tense with Ø®ÙˆØ§Ù‡Ù… + 10 verbs",
                    "Write about your plans for next week",
                    "Practice: Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… + subjunctive constructions",
                    "Make predictions using future tense"
                ],
                "dialogueTranslit": "Making weekend plans:\nSaara: Aakhar-e hafte che barnaameh-ee daari?\nRezaa: Mikhaaham be kooh beravam. To chetor?\nSaara: Hanooz nemidaanam. Shaayad khaneh bemaanam.\nRezaa: Mikhaahi baa maa biyaayi?\nSaara: Che vaght mirid?\nRezaa: Sobh-e zood, saa'at shesh.\nSaara: Baasheh, miyaayam. Omidvaaram havaa khub baashad!"
            },
            "12": {
                "title": "Culture and Celebrations",
                "vocabulary": [
                    {"farsi": "Ø¹ÛŒØ¯", "trans": "eid", "english": "celebration, holiday"},
                    {"farsi": "Ù†ÙˆØ±ÙˆØ²", "trans": "nowruz", "english": "Persian New Year"},
                    {"farsi": "Ø¬Ø´Ù†", "trans": "jashn", "english": "party, celebration"},
                    {"farsi": "Ø³Ù†Øª", "trans": "sonnat", "english": "tradition"},
                    {"farsi": "ÙØ±Ù‡Ù†Ú¯", "trans": "farhang", "english": "culture"},
                    {"farsi": "Ù‡Ø¯ÛŒÙ‡", "trans": "hadiye", "english": "gift, present"},
                    {"farsi": "Ù…Ù‡Ù…Ø§Ù†ÛŒ", "trans": "mehmani", "english": "party, gathering"},
                    {"farsi": "Ù…Ù‡Ù…Ø§Ù†", "trans": "mehmaan", "english": "guest"},
                    {"farsi": "Ù…ÛŒØ²Ø¨Ø§Ù†", "trans": "mizbaan", "english": "host"},
                    {"farsi": "ØªØ¹Ø§Ø±Ù", "trans": "ta'aarof", "english": "Persian courtesy/politeness system"},
                    {"farsi": "Ø³ÙØ±Ù‡", "trans": "sofre", "english": "tablecloth, spread"}
                ],
                "phrases": [
                    {"farsi": "Ø¹ÛŒØ¯ Ø´Ù…Ø§ Ù…Ø¨Ø§Ø±Ú©", "trans": "eid-e shomaa mobarak", "english": "Happy holiday (to you)"},
                    {"farsi": "Ø³Ø§Ù„ Ù†Ùˆ Ù…Ø¨Ø§Ø±Ú©", "trans": "saal-e no mobarak", "english": "Happy New Year"},
                    {"farsi": "Ø¯Ø¹ÙˆØª Ù…ÛŒâ€ŒÚ©Ù†Ù…", "trans": "da'vat mikonam", "english": "I invite (you)"},
                    {"farsi": "Ø®ÙˆØ§Ù‡Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯", "trans": "khaahesh mikonam befarmaa'id", "english": "Please, help yourself"}
                ],
                "grammar": "Cultural vocabulary and expressions. Ta'arof and Persian politeness conventions. Celebration and hospitality language. Giving and receiving invitations. Cultural customs and traditions.",
                "dialogue": "Nowruz celebration:\nÙ…Ø±ÛŒÙ…: Ø³Ø§Ù„ Ù†Ùˆ Ù…Ø¨Ø§Ø±Ú©!\nØ¹Ù„ÛŒ: Ø³Ø§Ù„ Ù†Ùˆ Ø´Ù…Ø§ Ù‡Ù… Ù…Ø¨Ø§Ø±Ú©! Ø¹ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø¬Ø³ØªÙ‡!\nÙ…Ø±ÛŒÙ…: Ù…Ù…Ù†ÙˆÙ†. Ø³ÙØ±Ù‡ Ù‡ÙØªâ€ŒØ³ÛŒÙ† Ø±Ø§ Ú†ÛŒØ¯ÛŒØ¯ØŸ\nØ¹Ù„ÛŒ: Ø¨Ù„Ù‡ØŒ Ø§Ù…Ø±ÙˆØ² ØµØ¨Ø­ Ø¨Ø§ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ú†ÛŒØ¯ÛŒÙ….\nÙ…Ø±ÛŒÙ…: Ú†Ù‡ Ø®ÙˆØ¨! Ø§Ù…Ø´Ø¨ Ù…Ù‡Ù…Ø§Ù†ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ\nØ¹Ù„ÛŒ: Ø¨Ù„Ù‡ØŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ùˆ Ø¯ÙˆØ³ØªØ§Ù† Ù…ÛŒâ€ŒØ¢ÛŒÙ†Ø¯. Ø´Ù…Ø§ Ù‡Ù… Ø¯Ø¹ÙˆØªÛŒØ¯!\nÙ…Ø±ÛŒÙ…: Ø®ÛŒÙ„ÛŒ Ù…Ù…Ù†ÙˆÙ†. Ø­ØªÙ…Ø§Ù‹ Ù…ÛŒâ€ŒØ¢ÛŒÙ….",
                "exercises": [
                    "Learn about Nowruz and Persian celebrations",
                    "Practice ta'arof expressions and polite phrases",
                    "Write about a celebration or party you attended",
                    "Describe Persian New Year traditions"
                ],
                "dialogueTranslit": "Nowruz celebration:\nMaryam: Saal-e no mobarak!\nAli: Saal-e no-ye shomaa ham mobarak! Eyd-e shomaa khojasteh!\nMaryam: Mamnun. Sofreh-ye haft-sin raa chidid?\nAli: Baleh, emrooz sobh baa khanevadeh chidim.\nMaryam: Che khub! Emshab mehmuni daarid?\nAli: Baleh, khanevadeh va dostaan miyaayand. Shomaa ham da'vatid!\nMaryam: Kheyli mamnun. Hatman miyaayam."
            },
            "13": {
                "title": "Work and Professions",
                "vocabulary": [
                    {"farsi": "Ú©Ø§Ø±", "trans": "kaar", "english": "work, job"},
                    {"farsi": "Ø´ØºÙ„", "trans": "shogl", "english": "profession, occupation"},
                    {"farsi": "Ù…Ù‡Ù†Ø¯Ø³", "trans": "mohandes", "english": "engineer"},
                    {"farsi": "Ù¾Ø²Ø´Ú©", "trans": "pezeshk", "english": "doctor"},
                    {"farsi": "Ù…Ø¹Ù„Ù…", "trans": "mo'allem", "english": "teacher"},
                    {"farsi": "Ø¯Ø§Ù†Ø´Ø¬Ùˆ", "trans": "daneshju", "english": "student"},
                    {"farsi": "Ø¯ÙØªØ±", "trans": "daftar", "english": "office"},
                    {"farsi": "Ø´Ø±Ú©Øª", "trans": "sherkat", "english": "company"},
                    {"farsi": "Ø­Ù‚ÙˆÙ‚", "trans": "hoghogh", "english": "salary"},
                    {"farsi": "Ø§Ø³ØªØ®Ø¯Ø§Ù…", "trans": "estekhdam", "english": "employment, hiring"}
                ],
                "phrases": [
                    {"farsi": "Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ", "trans": "che kaar mikonid?", "english": "What do you do? (profession)"},
                    {"farsi": "Ú©Ø¬Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ", "trans": "kojaa kaar mikonid?", "english": "Where do you work?"},
                    {"farsi": "Ù…Ù† Ù…Ø¹Ù„Ù… Ù‡Ø³ØªÙ…", "trans": "man mo'allem hastam", "english": "I am a teacher"},
                    {"farsi": "Ú†Ù†Ø¯ Ø³Ø§Ø¹Øª Ø¯Ø± Ø±ÙˆØ² Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ", "trans": "chand saa'at dar rooz kaar mikonid?", "english": "How many hours a day do you work?"}
                ],
                "grammar": "Professional vocabulary and workplace terms. Using compound verbs: Ú©Ø§Ø± Ú©Ø±Ø¯Ù† (to work), Ø¯Ø±Ø³ Ø®ÙˆØ§Ù†Ø¯Ù† (to study). Describing occupations with Ù‡Ø³ØªÙ† (to be). Time expressions related to work schedule.",
                "dialogue": "At a networking event:\nØ¹Ù„ÛŒ: Ø³Ù„Ø§Ù…ØŒ Ù…Ù† Ø¹Ù„ÛŒ Ù‡Ø³ØªÙ…. Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ\nÙ…Ø±ÛŒÙ…: Ø³Ù„Ø§Ù…ØŒ Ù…Ù† Ù…Ø±ÛŒÙ… Ù‡Ø³ØªÙ…. Ù…Ù† Ù…Ù‡Ù†Ø¯Ø³ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ù‡Ø³ØªÙ…. Ø´Ù…Ø§ Ú†Ø·ÙˆØ±ØŸ\nØ¹Ù„ÛŒ: Ù…Ù† Ù…Ø¹Ù„Ù… Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ù‡Ø³ØªÙ….\nÙ…Ø±ÛŒÙ…: Ø¬Ø§Ù„Ø¨Ù‡! Ú©Ø¬Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ\nØ¹Ù„ÛŒ: Ø¯Ø± ÛŒÚ© Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ø®ØµÙˆØµÛŒ.",
                "dialogueTranslit": "At a networking event:\nAli: Salaam, man Ali hastam. Che kaar mikonid?\nMaryam: Salaam, man Maryam hastam. Man mohandess-e narm-afzaar hastam. Shomaa chetor?\nAli: Man mo'allem-e zabaan-e englisi hastam.\nMaryam: Jaaleb-eh! Kojaa kaar mikonid?\nAli: Dar yek dabirestaan-e khosusi.",
                "exercises": [
                    "Learn 15 common professions in Farsi",
                    "Practice asking and answering about jobs",
                    "Write about your profession or studies",
                    "Describe your typical work day"
                ]
            },
            "14": {
                "title": "Hobbies and Leisure",
                "vocabulary": [
                    {"farsi": "Ø³Ø±Ú¯Ø±Ù…ÛŒ", "trans": "sargarmi", "english": "hobby, pastime"},
                    {"farsi": "ÙˆØ±Ø²Ø´", "trans": "varzesh", "english": "sport, exercise"},
                    {"farsi": "ÙÛŒÙ„Ù…", "trans": "film", "english": "movie, film"},
                    {"farsi": "Ú©ØªØ§Ø¨", "trans": "ketaab", "english": "book"},
                    {"farsi": "Ù…ÙˆØ³ÛŒÙ‚ÛŒ", "trans": "moosighi", "english": "music"},
                    {"farsi": "Ù†Ù‚Ø§Ø´ÛŒ", "trans": "naghhaashi", "english": "painting"},
                    {"farsi": "Ø´Ù†Ø§", "trans": "shenaa", "english": "swimming"},
                    {"farsi": "ÙÙˆØªØ¨Ø§Ù„", "trans": "footbaal", "english": "football, soccer"},
                    {"farsi": "Ø¯ÙˆØ³Øª Ø¯Ø§Ø´ØªÙ†", "trans": "doost daashtan", "english": "to like, to love"},
                    {"farsi": "Ø¨Ø§Ø²ÛŒ Ú©Ø±Ø¯Ù†", "trans": "baazi kardan", "english": "to play (games)"}
                ],
                "phrases": [
                    {"farsi": "Ø³Ø±Ú¯Ø±Ù…ÛŒ Ø´Ù…Ø§ Ú†ÛŒØ³ØªØŸ", "trans": "sargarmi-ye shomaa chist?", "english": "What is your hobby?"},
                    {"farsi": "Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… Ú©ØªØ§Ø¨ Ø¨Ø®ÙˆØ§Ù†Ù…", "trans": "doost daaram ketaab bekhaanam", "english": "I like to read books"},
                    {"farsi": "Ú†Ù‡ ÙˆØ±Ø²Ø´ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡ÛŒØ¯ØŸ", "trans": "che varzeshi anjaam midahid?", "english": "What sport do you do?"},
                    {"farsi": "ÙˆÙ‚Øª Ø¢Ø²Ø§Ø¯ Ø®ÙˆØ¯ Ø±Ø§ Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒÚ¯Ø°Ø±Ø§Ù†ÛŒØ¯ØŸ", "trans": "vaght-e aazaad-e khod raa chegoneh migodhraanid?", "english": "How do you spend your free time?"}
                ],
                "grammar": "Expressing preferences with Ø¯ÙˆØ³Øª Ø¯Ø§Ø´ØªÙ† (to like). Compound verbs for activities. Using present tense for habitual actions. Leisure vocabulary and cultural activities in Iran.",
                "dialogue": "Discussing hobbies:\nØ³Ø§Ø±Ø§: Ø¯Ø± ÙˆÙ‚Øª Ø¢Ø²Ø§Ø¯ Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŸ\nØ±Ø¶Ø§: Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ú©ØªØ§Ø¨ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ù… ÛŒØ§ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ú¯ÙˆØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ù…. ØªÙˆ Ú†Ø·ÙˆØ±ØŸ\nØ³Ø§Ø±Ø§: Ù…Ù† Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… ÙˆØ±Ø²Ø´ Ú©Ù†Ù…. Ø¯Ùˆ Ø¨Ø§Ø± Ø¯Ø± Ù‡ÙØªÙ‡ Ø¨Ù‡ Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ù…ÛŒâ€ŒØ±ÙˆÙ….\nØ±Ø¶Ø§: Ú†Ù‡ ÙˆØ±Ø²Ø´ÛŒØŸ\nØ³Ø§Ø±Ø§: Ø´Ù†Ø§ Ùˆ ÛŒÙˆÚ¯Ø§. Ø®ÛŒÙ„ÛŒ Ù„Ø°Øª Ù…ÛŒâ€ŒØ¨Ø±Ù….",
                "dialogueTranslit": "Discussing hobbies:\nSaara: Dar vaght-e aazaad che kaar mikoni?\nRezaa: Ma'molan ketaab mikhaanam yaa moosighi goosh midaham. To chetor?\nSaara: Man doost daaram varzesh konam. Do baar dar hafte be baashgaah miram.\nRezaa: Che varzeshi?\nSaara: Shenaa va yogaa. Kheyli lezzat mibar am.",
                "exercises": [
                    "List 10 hobbies and activities in Farsi",
                    "Write about your favorite hobby",
                    "Practice expressing likes and dislikes",
                    "Describe what you do in your free time"
                ]
            },
            "15": {
                "title": "Review and Conversation",
                "vocabulary": [
                    {"farsi": "ØµØ­Ø¨Øª Ú©Ø±Ø¯Ù†", "trans": "sohbat kardan", "english": "to talk, to converse"},
                    {"farsi": "ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ†", "trans": "yaad gereftan", "english": "to learn"},
                    {"farsi": "ØªÙ…Ø±ÛŒÙ† Ú©Ø±Ø¯Ù†", "trans": "tamrin kardan", "english": "to practice"},
                    {"farsi": "ÙÙ‡Ù…ÛŒØ¯Ù†", "trans": "fahmidan", "english": "to understand"},
                    {"farsi": "Ú¯ÙØªÚ¯Ùˆ", "trans": "goftegu", "english": "conversation, dialogue"},
                    {"farsi": "Ø³Ø¤Ø§Ù„", "trans": "so'aal", "english": "question"},
                    {"farsi": "Ø¬ÙˆØ§Ø¨", "trans": "javaab", "english": "answer"},
                    {"farsi": "Ù„Ù‡Ø¬Ù‡", "trans": "lahje", "english": "accent, dialect"},
                    {"farsi": "Ø±ÙˆØ§Ù†", "trans": "ravaan", "english": "fluent"},
                    {"farsi": "Ù¾ÛŒØ´Ø±ÙØª", "trans": "pishraft", "english": "progress"}
                ],
                "phrases": [
                    {"farsi": "ÙØ§Ø±Ø³ÛŒ Ø´Ù…Ø§ Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ø§Ø³Øª", "trans": "faarsi-ye shomaa kheyli khub ast", "english": "Your Persian is very good"},
                    {"farsi": "Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ù‡Ø³ØªÙ‡â€ŒØªØ± ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯ØŸ", "trans": "mitavaanid aaheste-tar sohbat konid?", "english": "Can you speak more slowly?"},
                    {"farsi": "Ø§ÛŒÙ† Ø±Ø§ Ù…ØªÙˆØ¬Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆÙ…", "trans": "in raa motavajjeh nemishavam", "english": "I don't understand this"},
                    {"farsi": "Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ø±Ø§ Ø¨Ú¯ÙˆÛŒÙ…ØŸ", "trans": "chegoneh baayad in raa beguyam?", "english": "How should I say this?"}
                ],
                "grammar": "Comprehensive review of all previous grammar points. Complex sentence structures. Polite conversation techniques. Modal verbs and ability expressions. Review of all tenses: past, present, future.",
                "dialogue": "Language learning conversation:\nÙ…Ø¹Ù„Ù…: Ø§Ù…Ø±ÙˆØ² Ù‡Ù…Ù‡ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ú©Ù‡ ÛŒØ§Ø¯ Ú¯Ø±ÙØªÛŒÙ… Ø±Ø§ Ù…Ø±ÙˆØ± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….\nØ¯Ø§Ù†Ø´Ø¬Ùˆ: Ø¹Ø§Ù„ÛŒÙ‡! Ù…Ù† Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ø¨ÛŒØ´ØªØ± ØªÙ…Ø±ÛŒÙ† Ú©Ù†Ù….\nÙ…Ø¹Ù„Ù…: ÙØ§Ø±Ø³ÛŒ Ø´Ù…Ø§ Ø®ÛŒÙ„ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.\nØ¯Ø§Ù†Ø´Ø¬Ùˆ: Ù…ØªØ´Ú©Ø±Ù…! Ø§Ù…Ø§ Ù‡Ù†ÙˆØ² Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù… Ø¨Ø§ Ù„Ù‡Ø¬Ù‡.\nÙ…Ø¹Ù„Ù…: Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯. Ø¨Ø§ ØªÙ…Ø±ÛŒÙ† Ø¨Ù‡ØªØ± Ù…ÛŒâ€ŒØ´ÙˆØ¯.\nØ¯Ø§Ù†Ø´Ø¬Ùˆ: Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¨Ø§ÛŒØ¯ ØªÙ…Ø±ÛŒÙ† Ú©Ù†Ù…ØŸ\nÙ…Ø¹Ù„Ù…: Ù‡Ø± Ø±ÙˆØ² Ú©Ù…ÛŒ ÙØ§Ø±Ø³ÛŒ ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯ Ùˆ Ú¯ÙˆØ´ Ø¯Ù‡ÛŒØ¯.",
                "dialogueTranslit": "Language learning conversation:\nMo'allem: Emrooz hame chizhaa-yi ke yaad gereftim raa moror mikonim.\nDaaneshjoo: Ali-yeh! Man mikhaaham bishtar tamrin konam.\nMo'allem: Faarsi-ye shomaa kheyli pishraft kardeh ast.\nDaaneshjoo: Moteshakkeram! Ammaa hanooz moshkel daaram baa lahje.\nMo'allem: Negaraan nabaashid. Baa tamrin behtar mishavad.\nDaaneshjoo: Che chizi baayad tamrin konam?\nMo'allem: Har rooz kami faarsi sohbat konid va goosh dahid.",
                "exercises": [
                    "Have a 5-minute conversation entirely in Farsi",
                    "Review all vocabulary from lessons 1-14",
                    "Write a short essay about your Farsi learning journey",
                    "Practice all verb tenses with different subjects",
                    "Role-play various real-life situations in Farsi"
                ]
            }
        };

        // App state
        let currentLesson = 1;
        let completedLessons = [];
        let currentFlashcardIndex = 0;
        const totalLessons = 15;

        // Toggle dialogue transliteration
        function toggleDialogueTransliteration(lessonNum) {
            const translitDiv = document.getElementById(`dialogue-transliteration-${lessonNum}`);
            if (translitDiv) {
                if (translitDiv.style.display === 'none') {
                    translitDiv.style.display = 'block';
                } else {
                    translitDiv.style.display = 'none';
                }
            }
        }

        // Load progress
        async function loadProgress() {
            try {
                const result = await window.storage.get('farsi-progress');
                if (result && result.value) {
                    const data = JSON.parse(result.value);
                    currentLesson = data.currentLesson || 1;
                    completedLessons = data.completedLessons || [];
                }
            } catch (e) {
                console.log('No saved progress');
            }
            updateProgressDisplay();
        }

        // Save progress
        async function saveProgress() {
            try {
                await window.storage.set('farsi-progress', JSON.stringify({
                    currentLesson,
                    completedLessons
                }));
            } catch (e) {
                console.error('Save failed:', e);
            }
        }

        // Update progress display
        function updateProgressDisplay() {
            const completed = completedLessons.length;
            const percentage = (completed / totalLessons) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${completed} of ${totalLessons} lessons completed`;
        }

        // Initialize lesson grid
        function initLessonGrid() {
            const grid = document.getElementById('lessonGrid');
            grid.innerHTML = '';
            
            // Display by units
            for (let unitNum = 1; unitNum <= 5; unitNum++) {
                const unit = UNITS[unitNum];
                
                // Add unit header
                const unitHeader = document.createElement('div');
                unitHeader.style.gridColumn = '1 / -1';
                unitHeader.style.marginTop = unitNum > 1 ? '30px' : '10px';
                unitHeader.style.marginBottom = '15px';
                unitHeader.innerHTML = `
                    <h3 style="color: #667eea; margin: 0; font-size: 1.1em;">${unit.name}</h3>
                    <p style="color: #666; font-size: 0.9em; margin: 5px 0 0 0;">${unit.description}</p>
                `;
                grid.appendChild(unitHeader);
                
                // Add lesson cards for this unit
                unit.lessons.forEach(i => {
                    const card = document.createElement('div');
                    card.className = 'lesson-card';
                    
                    if (completedLessons.includes(i)) {
                        card.classList.add('completed');
                    }
                    if (i === currentLesson) {
                        card.classList.add('current');
                    }
                    
                    const lesson = TEXTBOOK_DATA[i.toString()];
                    card.innerHTML = `
                        <div class="lesson-number">Lesson ${i}</div>
                        <div class="lesson-status">${completedLessons.includes(i) ? 'âœ“ Done' : i === currentLesson ? 'Current' : 'Not started'}</div>
                        <div style="font-size: 0.75em; margin-top: 5px;">${lesson.title}</div>
                    `;
                    
                    card.onclick = () => selectLesson(i);
                    grid.appendChild(card);
                });
            }
        }

        // Select a lesson
        function selectLesson(lessonNum) {
            currentLesson = lessonNum;
            saveProgress();
            initLessonGrid();
            
            // Update displays
            document.getElementById('readLessonNum').textContent = lessonNum;
            document.getElementById('practiceLessonNum').textContent = lessonNum;
            document.getElementById('flashcardsLessonNum').textContent = lessonNum;
            document.getElementById('quizLessonNum').textContent = lessonNum;
            
            // Load content
            loadLessonContent(lessonNum);
            
            // Switch to read tab
            showTab('read');
        }

        // Show tab
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            
            // Activate the corresponding button
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => {
                if (btn.textContent.includes('Lessons') && tabName === 'lessons') btn.classList.add('active');
                if (btn.textContent.includes('Read') && tabName === 'read') btn.classList.add('active');
                if (btn.textContent.includes('Practice') && tabName === 'practice') btn.classList.add('active');
                if (btn.textContent.includes('Flashcards') && tabName === 'flashcards') btn.classList.add('active');
                if (btn.textContent.includes('Quiz') && tabName === 'quiz') btn.classList.add('active');
            });
            
            // Load content for specific tabs
            if (tabName === 'practice') {
                loadPracticeExercises();
            } else if (tabName === 'flashcards') {
                loadFlashcards();
            } else if (tabName === 'quiz') {
                loadQuiz();
            }
        }

        // Load lesson content
        function loadLessonContent(lessonNum) {
            const lesson = TEXTBOOK_DATA[lessonNum.toString()];
            if (!lesson) return;
            
            document.getElementById('lessonTitle').textContent = lesson.title;
            
            let html = `
                <div class="section">
                    <h3>ğŸ“š Vocabulary</h3>
                    <table class="vocab-table">
                        <thead>
                            <tr>
                                <th>Farsi</th>
                                <th>Transliteration</th>
                                <th>English</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            lesson.vocabulary.forEach(word => {
                html += `
                    <tr>
                        <td class="farsi-text">${word.farsi}</td>
                        <td>${word.trans}</td>
                        <td>${word.english}</td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
                
                <div class="section">
                    <h3>ğŸ’¬ Common Phrases</h3>
            `;
            
            lesson.phrases.forEach(phrase => {
                html += `
                    <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                        <div class="farsi-text" style="margin-bottom: 8px;">${phrase.farsi}</div>
                        <div style="color: #666; font-size: 0.9em;">${phrase.trans}</div>
                        <div style="font-weight: 600; margin-top: 5px;">${phrase.english}</div>
                    </div>
                `;
            });
            
            html += `
                </div>
                
                <div class="section">
                    <h3>ğŸ“– Grammar Notes</h3>
                    <p style="line-height: 1.8;">${lesson.grammar}</p>
                </div>
                
                <div class="section">
                    <h3>ğŸ—£ï¸ Dialogue</h3>
                    <div class="farsi-text" style="background: white; padding: 20px; border-radius: 8px; white-space: pre-line;">${lesson.dialogue}</div>
                    <div style="margin-top: 15px;">
                        <button class="btn" onclick="toggleDialogueTransliteration(${lessonNum})" style="background: #6c757d;">ğŸ”¤ Show/Hide Transliteration</button>
                    </div>
                    <div id="dialogue-transliteration-${lessonNum}" style="display: none; margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 8px; border: 2px solid #ffc107;">
                        <h4>Transliteration:</h4>
                        <p style="line-height: 2; margin-top: 10px;">${lesson.dialogueTranslit || 'Transliteration not available'}</p>
                    </div>
                </div>
                
                <div class="section">
                    <h3>âœï¸ Exercises</h3>
                    <ol style="line-height: 2; margin-left: 20px;">
            `;
            
            lesson.exercises.forEach(ex => {
                html += `<li>${ex}</li>`;
            });
            
            html += `
                    </ol>
                </div>
                
                <div class="section">
                    <h3>âœï¸ Practice Exercises</h3>
                    <p style="margin-bottom: 15px; color: #666;">Complete these exercises based on the lesson content:</p>
            `;
            
            // Add interactive exercises
            lesson.exercises.forEach((ex, idx) => {
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <p style="font-weight: 600; margin-bottom: 10px;">${idx + 1}. ${ex}</p>
                        <textarea id="exercise${lessonNum}-${idx}" placeholder="Type your answer here..." style="width: 100%; min-height: 80px; padding: 10px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1em;"></textarea>
                        <div style="margin-top: 10px;">
                            <button class="btn" onclick="saveExerciseAnswer(${lessonNum}, ${idx})">ğŸ’¾ Save Answer</button>
                            <span id="save-status-${lessonNum}-${idx}" style="margin-left: 10px; color: #38ef7d; display: none;">âœ“ Saved!</span>
                        </div>
                    </div>
                `;
            });
            
            // Add dialogue practice section
            html += `
                </div>
                
                <div class="section">
                    <h3>ğŸ—£ï¸ Dialogue Practice</h3>
                    <p style="margin-bottom: 15px; color: #666;">Practice the dialogue by writing it out from memory, or create your own similar dialogue:</p>
                    <textarea id="dialogue-practice-${lessonNum}" placeholder="Write the dialogue here in Farsi or create your own..." style="width: 100%; min-height: 150px; padding: 15px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1.1em; direction: rtl;"></textarea>
                    <div style="margin-top: 10px;">
                        <button class="btn" onclick="saveDialoguePractice(${lessonNum})">ğŸ’¾ Save Dialogue Practice</button>
                        <button class="btn" onclick="showDialogueReference(${lessonNum})" style="background: #6c757d;">ğŸ‘ï¸ Show Reference</button>
                        <span id="dialogue-save-status-${lessonNum}" style="margin-left: 10px; color: #38ef7d; display: none;">âœ“ Saved!</span>
                    </div>
                    <div id="dialogue-reference-${lessonNum}" style="display: none; margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <h4>Reference Dialogue:</h4>
                        <div class="farsi-text" style="white-space: pre-line; margin-top: 10px;">${lesson.dialogue}</div>
                    </div>
                </div>
            `;
            
            document.getElementById('textbookContent').innerHTML = html;
            
            // Load any saved exercise answers and dialogue practice
            setTimeout(() => {
                loadExerciseAnswers(lessonNum);
                loadDialoguePractice(lessonNum);
            }, 100);
        }

        // Load practice exercises
        function loadPracticeExercises() {
            const lesson = TEXTBOOK_DATA[currentLesson.toString()];
            if (!lesson) return;
            
            let html = `
                <div class="info-box">
                    Practice translating between English and Farsi. Type your answer and check it!
                </div>
            `;
            
            // Translation practice
            const allItems = [...lesson.vocabulary, ...lesson.phrases];
            const randomItems = allItems.sort(() => 0.5 - Math.random()).slice(0, 5);
            
            // Store the exercise data globally so we can access it from event handlers
            window.currentExercises = randomItems.map((item, index) => {
                const showFarsi = Math.random() > 0.5;
                return {
                    question: showFarsi ? item.farsi : item.english,
                    answer: showFarsi ? item.english : item.farsi,
                    showFarsi: showFarsi,
                    lang: showFarsi ? 'en' : 'fa'
                };
            });
            
            window.currentExercises.forEach((exercise, index) => {
                const questionHTML = exercise.showFarsi 
                    ? `<span class="farsi-text">${exercise.question}</span>` 
                    : exercise.question;
                
                html += `
                    <div class="practice-card">
                        <h4>Exercise ${index + 1}</h4>
                        <p style="font-size: 1.2em; margin: 15px 0;">
                            ${questionHTML}
                        </p>
                        <p style="color: #666; font-size: 0.9em;">Translate to ${exercise.showFarsi ? 'English' : 'Farsi'}:</p>
                        <input type="text" id="answer${index}" placeholder="Your answer...">
                        <button class="btn" data-exercise-index="${index}">Check Answer</button>
                        <div id="feedback${index}"></div>
                    </div>
                `;
            });
            
            document.getElementById('practiceArea').innerHTML = html;
            
            // Add event listeners to the check buttons
            setTimeout(() => {
                document.querySelectorAll('.practice-card .btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-exercise-index'));
                        const exercise = window.currentExercises[index];
                        checkAnswer(index, exercise.answer, exercise.lang);
                    });
                });
            }, 50);
        }

        // Check answer
        function checkAnswer(index, correct, lang) {
            const userAnswer = document.getElementById(`answer${index}`).value.trim().toLowerCase();
            const correctAnswer = correct.toLowerCase();
            const feedback = document.getElementById(`feedback${index}`);
            
            // Simple fuzzy matching
            const isCorrect = userAnswer === correctAnswer || 
                             correctAnswer.includes(userAnswer) || 
                             userAnswer.includes(correctAnswer);
            
            if (isCorrect) {
                feedback.className = 'answer-feedback correct';
                feedback.innerHTML = `âœ“ Correct! ${lang === 'en' ? 'English' : 'Farsi'}: ${correct}`;
            } else {
                feedback.className = 'answer-feedback incorrect';
                feedback.innerHTML = `âœ— Not quite. Correct answer: ${correct}`;
            }
        }

        // Load flashcards
        function loadFlashcards() {
            const lesson = TEXTBOOK_DATA[currentLesson.toString()];
            if (!lesson) return;
            
            currentFlashcardIndex = 0;
            displayFlashcard();
        }

        // Display flashcard
        function displayFlashcard() {
            const lesson = TEXTBOOK_DATA[currentLesson.toString()];
            const vocab = lesson.vocabulary;
            
            if (currentFlashcardIndex >= vocab.length) {
                currentFlashcardIndex = 0;
            }
            
            const word = vocab[currentFlashcardIndex];
            
            let html = `
                <div class="info-box">
                    Click the card to flip it. Use the buttons to navigate.
                </div>
                <div class="flashcard" onclick="this.classList.toggle('flipped')">
                    <div class="flashcard-front farsi-text">${word.farsi}</div>
                    <div class="flashcard-back">
                        <div style="font-size: 1.2em; color: #667eea; margin-bottom: 10px;">${word.trans}</div>
                        <div style="font-size: 1.5em;">${word.english}</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="previousFlashcard()">â† Previous</button>
                    <span style="margin: 0 20px; font-weight: 600;">${currentFlashcardIndex + 1} / ${vocab.length}</span>
                    <button class="btn" onclick="nextFlashcard()">Next â†’</button>
                </div>
            `;
            
            document.getElementById('flashcardsArea').innerHTML = html;
        }

        function nextFlashcard() {
            const lesson = TEXTBOOK_DATA[currentLesson.toString()];
            currentFlashcardIndex = (currentFlashcardIndex + 1) % lesson.vocabulary.length;
            displayFlashcard();
        }

        function previousFlashcard() {
            const lesson = TEXTBOOK_DATA[currentLesson.toString()];
            currentFlashcardIndex = currentFlashcardIndex === 0 ? lesson.vocabulary.length - 1 : currentFlashcardIndex - 1;
            displayFlashcard();
        }

        // Load quiz
        function loadQuiz() {
            const lesson = TEXTBOOK_DATA[currentLesson.toString()];
            if (!lesson) return;
            
            const vocab = lesson.vocabulary;
            const numQuestions = Math.min(5, vocab.length);
            const questions = [...vocab].sort(() => 0.5 - Math.random()).slice(0, numQuestions);
            
            let html = `
                <div class="info-box">
                    Select the correct English translation for each Farsi word.
                </div>
            `;
            
            questions.forEach((q, qIndex) => {
                // Generate unique wrong answers
                const wrongAnswers = vocab
                    .filter(v => v.english !== q.english)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(v => v.english);
                
                // Ensure we have exactly 4 unique options
                const allOptions = [q.english, ...wrongAnswers];
                const uniqueOptions = [...new Set(allOptions)].slice(0, 4);
                
                // Shuffle options
                const options = uniqueOptions.sort(() => 0.5 - Math.random());
                
                html += `
                    <div class="practice-card">
                        <h4>Question ${qIndex + 1}</h4>
                        <p class="farsi-text" style="font-size: 1.8em; margin: 20px 0;">${q.farsi}</p>
                        <p style="color: #666;">Transliteration: ${q.trans}</p>
                        <div style="margin-top: 15px;" id="quiz-question-${qIndex}">
                `;
                
                options.forEach((opt, oIndex) => {
                    // Use data attributes instead of onclick with string parameters
                    html += `
                        <div class="quiz-option" data-question="${qIndex}" data-answer="${opt}" data-correct="${q.english}">
                            ${String.fromCharCode(65 + oIndex)}) ${opt}
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            html += `<button class="btn btn-success" style="width: 100%; margin-top: 20px;" onclick="loadQuiz()">ğŸ”„ New Quiz</button>`;
            
            document.getElementById('quizArea').innerHTML = html;
            
            // Add click listeners to quiz options
            setTimeout(() => {
                document.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const questionIndex = this.getAttribute('data-question');
                        const selected = this.getAttribute('data-answer');
                        const correct = this.getAttribute('data-correct');
                        handleQuizOptionClick(questionIndex, this, selected, correct);
                    });
                });
            }, 50);
        }

        // Handle quiz option click
        function handleQuizOptionClick(questionIndex, element, selected, correct) {
            const parent = element.parentElement;
            const options = parent.querySelectorAll('.quiz-option');
            
            // Disable all options after selection
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                opt.style.cursor = 'default';
            });
            
            // Remove previous selections
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Mark correct/incorrect
            if (selected === correct) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
                // Show correct answer
                options.forEach(opt => {
                    const optAnswer = opt.getAttribute('data-answer');
                    if (optAnswer === correct) {
                        opt.classList.add('correct');
                    }
                });
            }
        }

        // Mark lesson complete
        function markLessonComplete() {
            if (!completedLessons.includes(currentLesson)) {
                completedLessons.push(currentLesson);
                saveProgress();
                updateProgressDisplay();
                initLessonGrid();
                alert(`âœ… Lesson ${currentLesson} marked as complete! Great job! ğŸ‰`);
                
                // Move to next lesson if available
                if (currentLesson < totalLessons) {
                    if (confirm(`Move to Lesson ${currentLesson + 1}?`)) {
                        selectLesson(currentLesson + 1);
                    }
                }
            } else {
                alert('This lesson is already marked as complete!');
            }
        }

        // Save exercise answer
        async function saveExerciseAnswer(lessonNum, exerciseIdx) {
            const textarea = document.getElementById(`exercise${lessonNum}-${exerciseIdx}`);
            const answer = textarea.value;
            const statusSpan = document.getElementById(`save-status-${lessonNum}-${exerciseIdx}`);
            
            try {
                await window.storage.set(`exercise-${lessonNum}-${exerciseIdx}`, answer);
                statusSpan.style.display = 'inline';
                setTimeout(() => {
                    statusSpan.style.display = 'none';
                }, 2000);
            } catch (e) {
                alert('Could not save answer. Please try again.');
            }
        }

        // Load saved exercise answers
        async function loadExerciseAnswers(lessonNum) {
            const lesson = TEXTBOOK_DATA[lessonNum.toString()];
            if (!lesson) return;
            
            for (let i = 0; i < lesson.exercises.length; i++) {
                try {
                    const result = await window.storage.get(`exercise-${lessonNum}-${i}`);
                    if (result && result.value) {
                        const textarea = document.getElementById(`exercise${lessonNum}-${i}`);
                        if (textarea) {
                            textarea.value = result.value;
                        }
                    }
                } catch (e) {
                    // No saved answer
                }
            }
        }

        // Save dialogue practice
        async function saveDialoguePractice(lessonNum) {
            const textarea = document.getElementById(`dialogue-practice-${lessonNum}`);
            const practice = textarea.value;
            const statusSpan = document.getElementById(`dialogue-save-status-${lessonNum}`);
            
            try {
                await window.storage.set(`dialogue-practice-${lessonNum}`, practice);
                statusSpan.style.display = 'inline';
                setTimeout(() => {
                    statusSpan.style.display = 'none';
                }, 2000);
            } catch (e) {
                alert('Could not save dialogue practice. Please try again.');
            }
        }

        // Show dialogue reference
        function showDialogueReference(lessonNum) {
            const refDiv = document.getElementById(`dialogue-reference-${lessonNum}`);
            if (refDiv.style.display === 'none') {
                refDiv.style.display = 'block';
            } else {
                refDiv.style.display = 'none';
            }
        }

        // Load saved dialogue practice
        async function loadDialoguePractice(lessonNum) {
            try {
                const result = await window.storage.get(`dialogue-practice-${lessonNum}`);
                if (result && result.value) {
                    const textarea = document.getElementById(`dialogue-practice-${lessonNum}`);
                    if (textarea) {
                        textarea.value = result.value;
                    }
                }
            } catch (e) {
                // No saved practice
            }
        }

        // Initialize app
        async function init() {
            await loadProgress();
            initLessonGrid();
            loadLessonContent(currentLesson);
        }

        // Start app when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>